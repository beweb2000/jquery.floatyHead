(function(a){var b={positionFixed:false};var c={init:function(d){var e=document.body;if(document.createElement&&e&&e.appendChild&&e.removeChild){var f=document.createElement("div");if(!f.getBoundingClientRect){return null}f.innerHTML="x";f.style.cssText="position:fixed;top:100px;";e.appendChild(f);var g=e.style.height,h=e.scrollTop;e.style.height="3000px";e.scrollTop=500;var i=f.getBoundingClientRect().top;e.style.height=g;b.positionFixed=i===100;e.removeChild(f);e.scrollTop=h}a(window).bind("scroll.floatyHead",c.update);a(window).bind("resize.floatyHead",c.update_sizes);return this.each(function(){a(this).addClass("floatyBase");c.update_sizes()})},update:function(){var c=a(window).scrollTop();a(".floatyHead").each(function(){var d=a(this).data("offset").top;var e=a(this).data("maxOffset");if(c>d&&c<e){if(b.positionFixed){a(this).css("top",0).show()}else{a(this).css("position","absolute").css("top",c+"px").show()}}else{a(this).hide()}})},update_sizes:function(){a(".floatyHead").remove();a(".floatyBase").each(function(){var b=a(this).offset();a(this).data("offset",b);a(this).data("maxOffset",a(this).height()+b.top);a(this).find("thead th").each(function(){var b=a(this).css("width");a(this).css("width",b)});a(this).clone(true).removeClass("floatyBase").addClass("floatyHead").css("position","fixed").css("left",a(this).data("offset").left).css("top",a(this).data("offset").top).find("tbody").remove().end().appendTo("body")});c.update()}};a.fn.floatyHead=function(b){if(c[b]){return c[b].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof b==="object"||!b){return c.init.apply(this,arguments)}else{a.error("Method "+b+" does not exist on jQuery.floatyHead")}}})(jQuery)